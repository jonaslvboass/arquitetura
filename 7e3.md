<div style="width:100%; display: flex;"> <p style="margin: auto" align="center"> <a href="7e2.md">Se√ß√£o 7.2</a> </p><p style="margin: auto" align="center"> <a href="0.md">√çndice</a> </p><p style="margin: auto" align="right"> <a href="7e4.md">Se√ß√£o 7.4</a> </p> </div>

---

## 7.3 Padr√£o Broker

O **padr√£o arquitetural Broker** √© utilizado para construir sistemas distribu√≠dos com **m√∫ltiplos componentes que interagem indiretamente**, por meio de um intermedi√°rio chamado **broker** (ou "corretor").

Esse padr√£o promove o **desacoplamento** entre **clientes e servidores**, delegando ao broker a responsabilidade de localizar servi√ßos, encaminhar chamadas, e coordenar comunica√ß√£o entre partes distribu√≠das.

---

### üß© Estrutura do padr√£o Broker

| Componente     | Responsabilidade principal                                                   |
| -------------- | ---------------------------------------------------------------------------- |
| **Cliente**    | Solicita servi√ßos e envia requisi√ß√µes ao broker                              |
| **Broker**     | Intermedia a comunica√ß√£o, localiza o servidor e encaminha as chamadas        |
| **Servidor**   | Fornece os servi√ßos solicitados pelo cliente                                 |
| **Stub/Proxy** | Componentes auxiliares que encapsulam a comunica√ß√£o entre cliente e servidor |

---

### üîÅ Como funciona o fluxo?

1. O **Cliente** chama um m√©todo local no **Stub do Cliente**.
2. O Stub envia a requisi√ß√£o para o **Broker**, que localiza o **Servidor** apropriado.
3. O **Broker** redireciona a chamada para o **Stub do Servidor**.
4. O **Servidor** processa e envia a resposta de volta, passando novamente pelo broker.

---

### üí° Implementando com MOM (Message-Oriented Middleware)

Uma forma moderna e altamente utilizada de implementar o padr√£o Broker √© por meio de **middleware orientado a mensagens (MOM)**, como:

- **RabbitMQ**
- **Apache Kafka**
- **ActiveMQ**
- **Amazon SQS**

Nesses casos, o **broker de mensagens √© o middleware**, e os servi√ßos se comunicam por meio de **filas ou t√≥picos**, de forma ass√≠ncrona.

---

### üß† Exemplo pr√°tico com MOM

Imagine um sistema de emiss√£o de boletos:

- O **servi√ßo de compras** envia uma mensagem para a fila `boletos-gerar` ap√≥s um pedido ser confirmado.
- O **servi√ßo de gera√ß√£o de boletos** escuta essa fila e, ao receber a mensagem, processa a gera√ß√£o.
- O **broker de mensagens** (ex: RabbitMQ) entrega a mensagem e garante o desacoplamento entre os servi√ßos.

Neste cen√°rio:

- O cliente **n√£o sabe quem ir√° processar** a mensagem.
- O broker (MOM) **faz o roteamento e entrega confi√°vel** da mensagem.
- Os servi√ßos podem estar em **linguagens e ambientes distintos**.

---

### üí° Vantagens do padr√£o Broker

- Alta **desacoplagem** entre cliente e servidor
- **Escalabilidade** e **flexibilidade** na adi√ß√£o de novos servi√ßos
- Com MOM, permite **comunica√ß√£o ass√≠ncrona e toler√¢ncia a falhas**

---

### ‚ö†Ô∏è Desvantagens

- O **Broker pode se tornar um gargalo ou ponto √∫nico de falha**
- **Complexidade maior** no tratamento de falhas e exce√ß√µes
- Pode adicionar **lat√™ncia** √† comunica√ß√£o

---

### üìö Refer√™ncias

- Buschmann, F. et al. ‚Äì _Pattern-Oriented Software Architecture: A System of Patterns_
- Bass, L., Clements, P., & Kazman, R. ‚Äì _Software Architecture in Practice_
- Tanenbaum, A. ‚Äì _Distributed Systems: Principles and Paradigms_
- RabbitMQ, Kafka e outros: documenta√ß√£o oficial
