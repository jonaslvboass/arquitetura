## 7.4 Padr√£o MVVM (Model-View-ViewModel)

O padr√£o **MVVM (Model-View-ViewModel)** √© uma evolu√ß√£o do MVC voltada principalmente para interfaces **reativas** e **interativas**, como as encontradas em **Single Page Applications (SPAs)**.

Esse padr√£o organiza a l√≥gica da interface em tr√™s partes:

| Camada        | Responsabilidade                                                     |
| ------------- | -------------------------------------------------------------------- |
| **Model**     | Representa os dados e regras de neg√≥cio                              |
| **View**      | Interface gr√°fica (HTML, CSS, DOM) que o usu√°rio v√™                  |
| **ViewModel** | Exp√µe os dados e comportamentos da interface; faz liga√ß√£o com a View |

A **ViewModel** atua como ponte entre a interface (View) e os dados (Model), com suporte a **data-binding** (liga√ß√£o de dados), especialmente **bidirecional** nos frameworks modernos.

---

### üß† O que √© uma SPA (Single Page Application)?

Uma **SPA** √© uma aplica√ß√£o web que **carrega uma √∫nica p√°gina HTML** e atualiza dinamicamente o conte√∫do no navegador, **sem recarregar a p√°gina inteira**.

#### üì¶ Componentes internos comuns em uma SPA:

| Componente                         | Fun√ß√£o                                                               |
| ---------------------------------- | -------------------------------------------------------------------- |
| **Router**                         | Gerencia a navega√ß√£o entre "p√°ginas" sem recarregar o navegador      |
| **Componentes**                    | Blocos reutiliz√°veis de interface e l√≥gica (ex: bot√µes, formul√°rios) |
| **Services/API Layer**             | Lida com comunica√ß√£o com o backend via chamadas REST/HTTP            |
| **Store/State Manager (opcional)** | Armazena estado global da aplica√ß√£o (ex: Vuex, Redux)                |
| **ViewModels**                     | Camada l√≥gica entre os dados e a interface visual                    |
| **Views**                          | Representa√ß√µes visuais associadas a rotas e componentes              |

---

### üîÅ Fluxo t√≠pico MVVM em uma SPA

1. O **usu√°rio interage com a View** (ex: edita um campo).
2. O **binding** atualiza automaticamente a **ViewModel**.
3. A ViewModel, por sua vez, **consulta ou atualiza o Model** via chamadas REST.
4. Quando o Model muda, a ViewModel √© atualizada, e isso **reflete automaticamente na View**.

---

### üîß Exemplo pr√°tico: Formul√°rio de perfil

- **Model**: dados do usu√°rio vindos do backend (`GET /usuarios/42`)
- **ViewModel**: lida com campos de entrada, valida√ß√µes, bot√£o de salvar, etc.
- **View**: interface HTML com campos vinculados via `v-model`, `ngModel` ou `data-bind`
- **API Service**: camada que encapsula `GET`, `PUT` e `POST` usando `fetch` ou `axios`

```js
// Exemplo em Vue.js
<template>
  <input v-model="usuario.nome" />
  <button @click="salvar">Salvar</button>
</template>

<script>
export default {
  data() {
    return {
      usuario: { nome: '' }
    }
  },
  methods: {
    salvar() {
      axios.put(`/usuarios/${this.usuario.id}`, this.usuario)
    }
  }
}
</script>
```

---

### üí° Vantagens do MVVM em SPAs

- Separa√ß√£o de responsabilidades mais clara
- Redu√ß√£o de c√≥digo repetitivo para atualizar a interface
- Melhoria na testabilidade da l√≥gica de interface
- Facilidade para trabalhar com interfaces ricas e interativas

---

### ‚ö†Ô∏è Desafios

- Binding excessivo pode dificultar a depura√ß√£o
- Ciclos de depend√™ncia entre componentes mal estruturados
- Aplica√ß√µes maiores requerem boas pr√°ticas de modulariza√ß√£o e gest√£o de estado

---

### üìö Refer√™ncias

- Microsoft ‚Äì _MVVM Design Pattern_
- Vue.js Docs ‚Äì _Reactivity and Composition API_
- Angular Docs ‚Äì _Data Binding and Architecture Overview_
- Evan You, Dan Abramov ‚Äì Talks sobre arquitetura de SPAs
